# update-gold Action

This is meant to be run after a `validate` action. 
We assume that the histogram files generated by the `validate` action
are each in their own "sample" directory where the `gold.root`
golden histogram file should be committed.

We are not allowed to push these histograms directly to a protected branch (like trunk),
so we open a PR and tag specific reviewers to double check that this action only
changed the golden histograms and the label file.

> **Note**: Pushes originating from GitHub actions _do not_ trigger other workflows.
> This is done to avoid infinite loops of actions triggering each other,
> which is exactly what would happen to us if it wasn't configured in this way.

We also modify the file storing the gold label to update the label for the gold histograms.
This label is changed to the tag of the release that triggered this action.

After these modifications are done, we expect another action to create a PR on these changes.

## Outputs

We save the new label as an output of this action, so we can put it 
into the commit message of the PR creation.

- `new-label`
  - New value inside label file for the golden histograms

## Inputs

- `samples`
  - Space separated list of samples to commit
  - e.g. `inclusive ecal_pn it_pileup`

## In-Workflow Example

This is meant to be paired with the validate action and artifacts.
We generate the various samples in parallel in different jobs and have each one upload its output
histogram file as an artifact using the name `<sample>-new-gold` and then we download all the artifacts
and use this action to commit the new gold in the correct location.
